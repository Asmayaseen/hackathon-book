"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[3384],{3077:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"module-02-simulation/week-7-unity","title":"Week 7: Unity for Robotics","description":"Unity for Robotics","source":"@site/docs/module-02-simulation/week-7-unity.md","sourceDirName":"module-02-simulation","slug":"/module-02-simulation/week-7-unity","permalink":"/hackathon-book/module-02-simulation/week-7-unity","draft":false,"unlisted":false,"editUrl":"https://github.com/Asmayaseen/hackathon-book/tree/main/frontend/docs/module-02-simulation/week-7-unity.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Week 7: Sensor Simulation","permalink":"/hackathon-book/module-02-simulation/week-7-sensors"},"next":{"title":"Week 7: Building Custom Simulation Worlds","permalink":"/hackathon-book/module-02-simulation/week-7-worlds"}}');var o=e(4848),s=e(8453);const r={},l="Week 7: Unity for Robotics",a={},c=[{value:"Why Unity for Robotics?",id:"why-unity-for-robotics",level:2},{value:"Installation and Setup",id:"installation-and-setup",level:2},{value:"URDF Importer: From ROS to Unity",id:"urdf-importer-from-ros-to-unity",level:2},{value:"Articulation Bodies: Unity&#39;s Multi-Body Physics",id:"articulation-bodies-unitys-multi-body-physics",level:2},{value:"PhysX Engine Configuration",id:"physx-engine-configuration",level:2},{value:"ROS2 Integration: Publishing Joint States",id:"ros2-integration-publishing-joint-states",level:2},{value:"Unity ML-Agents for Reinforcement Learning",id:"unity-ml-agents-for-reinforcement-learning",level:2}];function d(n){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"week-7-unity-for-robotics",children:"Week 7: Unity for Robotics"})}),"\n",(0,o.jsx)(i.p,{children:(0,o.jsx)(i.img,{alt:"Unity for Robotics",src:e(6290).A+"",width:"675",height:"1200"})}),"\n",(0,o.jsx)(i.h2,{id:"why-unity-for-robotics",children:"Why Unity for Robotics?"}),"\n",(0,o.jsxs)(i.p,{children:["While Gazebo excels at ROS2 integration, ",(0,o.jsx)(i.strong,{children:"Unity"})," offers:"]}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Photorealistic Rendering"}),": Essential for vision-based policies and sim-to-real transfer"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"NVIDIA PhysX"}),": High-performance physics with GPU acceleration"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"ML-Agents Integration"}),": Built-in reinforcement learning framework"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"VR/AR Support"}),": Human-robot interaction studies and teleoperation"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Unity Robotics Hub"})," bridges Unity with ROS2 via TCP, enabling seamless integration."]}),"\n",(0,o.jsx)(i.h2,{id:"installation-and-setup",children:"Installation and Setup"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"# Prerequisites: Unity 2021.3 LTS or later\n# Download Unity Hub from https://unity.com/download\n\n# Install Unity Robotics Hub packages in Unity:\n# 1. Open Unity Editor\n# 2. Window \u2192 Package Manager \u2192 Add package from git URL:\n#    - com.unity.robotics.urdf-importer\n#    - com.unity.robotics.ros-tcp-connector\n\n# Install ROS2 side (ROS-TCP-Endpoint)\ncd ~/ros2_ws/src\ngit clone https://github.com/Unity-Technologies/ROS-TCP-Endpoint.git\ncd ~/ros2_ws\ncolcon build --packages-select ros_tcp_endpoint\nsource install/setup.bash\n\n# Launch ROS2 endpoint (bridge)\nros2 run ros_tcp_endpoint default_server_endpoint --ros-args -p ROS_IP:=127.0.0.1\n"})}),"\n",(0,o.jsx)(i.h2,{id:"urdf-importer-from-ros-to-unity",children:"URDF Importer: From ROS to Unity"}),"\n",(0,o.jsxs)(i.p,{children:["Unity uses ",(0,o.jsx)(i.strong,{children:"articulation bodies"})," (PhysX feature) for multi-body dynamics. The URDF importer converts ROS robot descriptions to Unity GameObjects."]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Workflow"}),":"]}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsx)(i.li,{children:"Export URDF from ROS2 workspace (example: TurtleBot3)"}),"\n"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:'# Locate URDF file\nfind ~/ros2_ws/src -name "*.urdf"\n# Example: ~/ros2_ws/src/turtlebot3/turtlebot3_description/urdf/turtlebot3_waffle.urdf\n'})}),"\n",(0,o.jsxs)(i.ol,{start:"2",children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Import in Unity:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.code,{children:"Assets \u2192 Import Robot from URDF"})}),"\n",(0,o.jsxs)(i.li,{children:["Select ",(0,o.jsx)(i.code,{children:".urdf"})," file"]}),"\n",(0,o.jsxs)(i.li,{children:["Choose ",(0,o.jsx)(i.strong,{children:"Import Settings"}),":","\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Mesh Decomposition"}),": Convex hull (faster collision)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Axis Type"}),": Y-Up (Unity convention)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Articulation Body"}),": Enabled"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Result: GameObject hierarchy with:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"ArticulationBody"})," components (joints)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"MeshRenderer"})," (visual)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"MeshCollider"})," (collision)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Example: Simple 2-DOF Arm in URDF"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:'\x3c!-- two_dof_arm.urdf --\x3e\n<robot name="simple_arm">\n  <link name="base_link">\n    <visual>\n      <geometry><box size="0.1 0.1 0.2"/></geometry>\n      <material name="blue"><color rgba="0 0 1 1"/></material>\n    </visual>\n    <collision>\n      <geometry><box size="0.1 0.1 0.2"/></geometry>\n    </collision>\n    <inertial>\n      <mass value="2.0"/>\n      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.005"/>\n    </inertial>\n  </link>\n\n  <joint name="shoulder_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="upper_arm"/>\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/> \x3c!-- Rotate around Z --\x3e\n    <limit lower="-1.57" upper="1.57" effort="10" velocity="2.0"/>\n  </joint>\n\n  <link name="upper_arm">\n    <visual>\n      <geometry><cylinder radius="0.05" length="0.3"/></geometry>\n      <material name="red"><color rgba="1 0 0 1"/></material>\n    </visual>\n    <collision>\n      <geometry><cylinder radius="0.05" length="0.3"/></geometry>\n    </collision>\n    <inertial>\n      <mass value="1.0"/>\n      <inertia ixx="0.008" ixy="0" ixz="0" iyy="0.008" iyz="0" izz="0.001"/>\n    </inertial>\n  </link>\n</robot>\n'})}),"\n",(0,o.jsx)(i.p,{children:"After import, Unity creates:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"base_link"})," (GameObject with ArticulationBody, immovable anchor)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"upper_arm"})," (child GameObject, ArticulationBody with revolute joint)"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"articulation-bodies-unitys-multi-body-physics",children:"Articulation Bodies: Unity's Multi-Body Physics"}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"ArticulationBody"})," is Unity's solution for robotic chains (replaces legacy ConfigurableJoint). Key properties:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csharp",children:'// C# script to control joint (attach to upper_arm GameObject)\nusing UnityEngine;\n\npublic class JointController : MonoBehaviour\n{\n    private ArticulationBody articulationBody;\n\n    void Start()\n    {\n        articulationBody = GetComponent<ArticulationBody>();\n\n        // Configure joint drive (PD controller)\n        var drive = articulationBody.xDrive;\n        drive.stiffness = 1000f;  // P gain (position control)\n        drive.damping = 100f;     // D gain (velocity damping)\n        drive.forceLimit = 10f;   // Max torque (10 Nm)\n        articulationBody.xDrive = drive;\n    }\n\n    void Update()\n    {\n        // Set target position (in degrees)\n        float targetAngle = Mathf.Sin(Time.time) * 90f; // Oscillate \xb190\xb0\n\n        var drive = articulationBody.xDrive;\n        drive.target = targetAngle;\n        articulationBody.xDrive = drive;\n\n        // Read current joint state\n        float currentAngle = articulationBody.jointPosition[0] * Mathf.Rad2Deg;\n        float currentVelocity = articulationBody.jointVelocity[0];\n\n        Debug.Log($"Joint Angle: {currentAngle:F2}\xb0, Velocity: {currentVelocity:F2} rad/s");\n    }\n}\n'})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Key Difference from Gazebo"}),": Unity uses ",(0,o.jsx)(i.strong,{children:"implicit spring-damper drives"})," (built-in PD control), while Gazebo requires external controllers via plugins."]}),"\n",(0,o.jsx)(i.h2,{id:"physx-engine-configuration",children:"PhysX Engine Configuration"}),"\n",(0,o.jsxs)(i.p,{children:["Unity's ",(0,o.jsx)(i.strong,{children:"PhysX"})," requires tuning for stable humanoid simulation."]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Project Settings \u2192 Physics"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csharp",children:"// Script to configure physics at runtime (attach to empty GameObject)\nusing UnityEngine;\n\npublic class PhysicsConfig : MonoBehaviour\n{\n    void Start()\n    {\n        // Global physics settings\n        Physics.gravity = new Vector3(0, -9.81f, 0); // Earth gravity\n        Physics.defaultSolverIterations = 12;        // Higher = more stable joints\n        Physics.defaultSolverVelocityIterations = 8; // Velocity constraint iterations\n\n        // Time settings (fixed timestep for physics)\n        Time.fixedDeltaTime = 0.01f; // 100 Hz physics update (0.01s)\n\n        // Articulation-specific settings\n        Physics.ArticulationSolverIterations = 16; // Critical for humanoid stability\n        Physics.ArticulationSolverVelocityIterations = 4;\n    }\n}\n"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Stability Tips"}),":"]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Solver Iterations"}),": Increase to 16-24 for humanoids (default 6 is too low)"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Fixed Timestep"}),": Keep at 0.01s (100Hz) or lower for multi-body stability"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Continuous Collision Detection"}),": Enable on fast-moving links (feet during swing phase)"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"ros2-integration-publishing-joint-states",children:"ROS2 Integration: Publishing Joint States"}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Unity \u2192 ROS2 Communication"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csharp",children:'// Publish joint states to ROS2 (requires ROS-TCP-Connector)\nusing UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Sensor;\n\npublic class JointStatePublisher : MonoBehaviour\n{\n    private ROSConnection ros;\n    private ArticulationBody[] joints;\n    private float publishInterval = 0.1f; // 10 Hz\n    private float timer = 0f;\n\n    void Start()\n    {\n        // Connect to ROS\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.RegisterPublisher<JointStateMsg>("/joint_states");\n\n        // Find all articulation bodies in robot\n        joints = GetComponentsInChildren<ArticulationBody>();\n    }\n\n    void FixedUpdate()\n    {\n        timer += Time.fixedDeltaTime;\n\n        if (timer >= publishInterval)\n        {\n            timer = 0f;\n            PublishJointStates();\n        }\n    }\n\n    void PublishJointStates()\n    {\n        var msg = new JointStateMsg\n        {\n            header = new RosMessageTypes.Std.HeaderMsg\n            {\n                stamp = new RosMessageTypes.Std.TimeMsg\n                {\n                    sec = (int)Time.time,\n                    nanosec = (uint)((Time.time % 1) * 1e9)\n                }\n            },\n            name = new string[joints.Length],\n            position = new double[joints.Length],\n            velocity = new double[joints.Length],\n            effort = new double[joints.Length]\n        };\n\n        for (int i = 0; i < joints.Length; i++)\n        {\n            msg.name[i] = joints[i].name;\n            msg.position[i] = joints[i].jointPosition[0]; // Radians\n            msg.velocity[i] = joints[i].jointVelocity[0]; // Rad/s\n            msg.effort[i] = joints[i].jointForce[0];      // Torque (Nm)\n        }\n\n        ros.Publish("/joint_states", msg);\n    }\n}\n'})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"ROS2 Subscriber (verify data)"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"ros2 topic echo /joint_states\n"})}),"\n",(0,o.jsx)(i.h2,{id:"unity-ml-agents-for-reinforcement-learning",children:"Unity ML-Agents for Reinforcement Learning"}),"\n",(0,o.jsxs)(i.p,{children:["Unity's ",(0,o.jsx)(i.strong,{children:"ML-Agents"})," framework enables training policies directly in Unity (alternative to Isaac Gym)."]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Quick Start"}),":"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csharp",children:"using Unity.MLAgents;\nusing Unity.MLAgents.Actuators;\nusing Unity.MLAgents.Sensors;\n\npublic class HumanoidAgent : Agent\n{\n    private ArticulationBody[] joints;\n\n    public override void Initialize()\n    {\n        joints = GetComponentsInChildren<ArticulationBody>();\n    }\n\n    // Observations: joint positions + velocities\n    public override void CollectObservations(VectorSensor sensor)\n    {\n        foreach (var joint in joints)\n        {\n            sensor.AddObservation(joint.jointPosition[0]); // Position\n            sensor.AddObservation(joint.jointVelocity[0]); // Velocity\n        }\n    }\n\n    // Actions: target joint angles\n    public override void OnActionReceived(ActionBuffers actions)\n    {\n        for (int i = 0; i < joints.Length; i++)\n        {\n            var drive = joints[i].xDrive;\n            drive.target = actions.ContinuousActions[i] * 90f; // \xb190\xb0 range\n            joints[i].xDrive = drive;\n        }\n    }\n\n    // Reward: standing upright\n    public void FixedUpdate()\n    {\n        float uprightBonus = transform.up.y; // 1.0 if perfectly vertical\n        AddReward(uprightBonus * 0.01f); // Small reward per step\n\n        if (transform.position.y < 0.5f) // Fell down\n        {\n            SetReward(-1f);\n            EndEpisode();\n        }\n    }\n}\n"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Training"}),": Use ",(0,o.jsx)(i.code,{children:"mlagents-learn"})," (Python package) with PPO algorithm."]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Exercise"}),": Import a humanoid URDF into Unity. Create a C# script that applies sinusoidal joint commands to make the robot wave one arm. Publish joint states to ROS2 and visualize in RViz."]}),"\n",(0,o.jsx)(i.hr,{}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Next"}),": ",(0,o.jsx)(i.a,{href:"/hackathon-book/module-02-simulation/week-7-worlds",children:"Week 7 - Building Custom Worlds"})," - Terrains, obstacles, and realistic environments."]})]})}function u(n={}){const{wrapper:i}={...(0,s.R)(),...n.components};return i?(0,o.jsx)(i,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},6290:(n,i,e)=>{e.d(i,{A:()=>t});const t=e.p+"assets/images/ai-17-7cb3d6daa8bb40a5ad26c69dd0ec4966.png"},8453:(n,i,e)=>{e.d(i,{R:()=>r,x:()=>l});var t=e(6540);const o={},s=t.createContext(o);function r(n){const i=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function l(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),t.createElement(s.Provider,{value:i},n.children)}}}]);